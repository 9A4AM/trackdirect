name: Create and publish a Docker image

#on:
#  push:
#    branches:
#      - 'main'

on: [push, pull_request]

jobs:
  docker:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
      - name: docker hub login
        env:
          DOCKER_USER: ${{ secrets.DOCKERHUB_USERNAME }}
          DOCKER_PASSWORD: ${{ secrets.DOCKERHUB_TOKEN }}
        run: docker login -u $DOCKER_USER -p $DOCKER_PASSWORD
      - name: Build the aprsc image
        run: docker build . --file aprsc.dockerfile --tag peterus/aprsc:latest
      - name: Docker Push
        run: docker push ${{ secrets.DOCKERHUB_USERNAME }}/aprsc:latest
#      - name: Build and push Docker image
#        uses: docker/build-push-action@v2
#        with:
#          context: .
#          file: db.dockerfile
#          push: true
#          tags: ${{ secrets.DOCKERHUB_USERNAME }}/trackdirect-db:latest
#      - name: Build and push Docker image
#        uses: docker/build-push-action@v2
#        with:
#          context: .
#          file: trackdirect-apache.dockerfile
#          push: true
#          tags: ${{ secrets.DOCKERHUB_USERNAME }}/trackdirect-apache:latest
#      - name: Build and push Docker image
#        uses: docker/build-push-action@v2
#        with:
#          context: .
#          file: trackdirect-python2.dockerfile
#          push: true
#          tags: ${{ secrets.DOCKERHUB_USERNAME }}/trackdirect-python2:latest
#
